<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>学生查询页面</title>
<link rel="icon" href="/static/favicon.ico" type="image/ico">
<meta name="keywords" content="毕业要求达成度系统">
<meta name="description" content="毕业要求达成度系统">
<meta name="author" content="yinqi">
<link href="/static/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/css/materialdesignicons.min.css" rel="stylesheet">
<link href="/static/css/style.min.css" rel="stylesheet">
</head>
  
<div>
<div class="lyear-layout-web">
  <div class="lyear-layout-container">
    <!--左侧导航-->
    <aside class="lyear-layout-sidebar">
       
       <!-- logo -->
       <div id="logo" class="sidebar-header">
        <a href="student_query.html"><img src="/static/images/nwu_login.png" width="220px" height="80px" /></a>
      </div>
      <div class="lyear-layout-sidebar-scroll">
        <nav class="sidebar-main">
          <ul class="nav nav-drawer">
            <li class="active"> <a href="/student/query"><i class="mdi mdi-home"></i> 查询评价值</a> </li>
          </ul>
        </nav>
      </div>
      
    </aside>
    <!--End 左侧导航-->
    
     <!--头部信息-->
     <header class="lyear-layout-header">
      
      <nav class="navbar navbar-default">
        <div class="topbar">
          
          <div class="topbar-left">
            <div class="lyear-aside-toggler">
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
            </div>
            <span class="navbar-page-title"> 查询页面 </span>
          </div>
          
          <ul class="topbar-right">
            <li class="dropdown dropdown-profile">
              <a href="javascript:void(0)" data-toggle="dropdown">
                <img class="img-avatar img-avatar-48 m-r-10" src="/static/images/users/avatar.jpg" alt="头像" />
                <span>{{current_user.user_id}} <span class="caret"></span></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li> <a href="/logout"><i class="mdi mdi-logout-variant"></i> 退出登录</a> </li>
              </ul>
            </li>
            <!--切换主题配色-->
		    <li class="dropdown dropdown-skin">
			  <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
			  <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                <li class="drop-title"><p>主题</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                    <label for="site_theme_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                </li>
			    <li class="drop-title"><p>LOGO</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>头部</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>侧边栏</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
				</li>
			  </ul>
			</li>
            <!--切换主题配色-->
          </ul>
          
        </div>
      </nav>
      
    </header>
    <!--End 头部信息-->
    
    <!--页面主要内容-->
    <main class="lyear-layout-content">

      <div class="container-fluid">
        
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header">
                <span class="mdi mdi-school"></span><h3>{{ current_user.user_id }}</h3>
              </div>
              <div class="card-body">
                <div class="row">
                  
                  <div class="col-sm-4 col-xs-12">
                    <ul>
                      <li><strong>学业预警：</strong>未收到</li>
                      <li><strong>通过数值：</strong>0.65</li>
                      <li><strong>应修课程：</strong>{% if user_info["need"] %}
                      {{ user_info["need"] }}
                      {% endif %} </li>
                      <li><strong>已修课程：</strong>{% if user_info["already"] %}
                      {{ user_info["already"] }}
                      {% endif %}</li>
                    </ul>
                  </div>

                  <div class="col-sm-4 col-xs-12">
                  </div>

                  <div class="col-sm-4 col-xs-12">
                    <ul class="list-unstyled">
                      <li>
                        <small>毕业要求达成度</small></li>
                      <li><h3>{% if user_info["grade"] %}
                      {{ user_info["grade"] }}
                      {% endif %} </h3></li>
                    </ul>
                  </div>
                  
                </div>
                <!-- .row -->
              </div>
            </div>
          </div>
        </div>
        <!-- .row -->

        
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header"><h4>预警信息通知</h4></div>
              <div class="card-body">
                  {% if user_info["notice"] %}
                  <div class="alert alert-info" role="alert">{{ user_info["notice"] }}</div>
                  {% endif %}
              </div>
            </div>
          </div>
        </div>
        <!-- .row -->

        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header"><h4>毕业要求指标点评价</h4></div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-bordered" id="tab" >
                    <thead>
                      <tr>
                        <th>达成度最终结果</th>
                        <th>毕业要求</th>
                        <th>毕业要求达成度</th>
                        <th>指标点</th>
                        <th>指标点达成度</th>
                        <th>课程</th>
                        <th>权重</th>
                        <th>课程达成度</th>
                        <th>计算结果（权重*达成度）</th>
                      </tr>
                    </thead>
                    <tbody>
                    {% if send_data %}
                        {% for foo in send_data %}
                            <tr>
                            <td>{% if foo[9] %}
                            {{ foo[9] }}
                            {% endif %} </td>
                            <td>{% if foo[0] %}
                            {{ foo[0] }}
                            {% endif %} </td>
                            <td>{% if foo[8] %}
                            {{ foo[8] }}

                            {% endif %} </td>
                            <td>{% if foo[1] %}
                            {{ foo[1] }}
                            {% endif %} </td>
                            <td>{% if foo[7] %}
                            {{ foo[7] }}
                            {% endif %} </td>
                            <td>{% if foo[3] %}
                            {{ foo[3] }}
                            {% endif %} </td>
                            <td>{% if foo[4] %}
                            {{ foo[4] }}
                            {% endif %} </td>
                            <td>{% if foo[5] %}
                            {{ foo[5] }}
                            {% endif %} </td>
                            <td>{% if foo[6] %}
                            {{ foo[6] }}
                            {% endif %} </td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                    </tbody>
                  </table>
                </div>
       
              </div>
            </div>
          </div>
        </div>
              </div>
    </main>
          </div>
        </div>
      </div>

    <!--End 页面主要内容-->
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="/static/js/main.min.js"></script>
<script>
function mc(tableId, startRow, endRow, col) {
    var tb = document.getElementById(tableId);
    if (col >= tb.rows[0].cells.length) {
    return;
    }
    if (col == 0) { endRow = tb.rows.length-1; }
    for (var i = startRow; i < endRow; i++) {
    if (tb.rows[startRow].cells[col].innerHTML == tb.rows[i + 1].cells[0].innerHTML) {
    tb.rows[i + 1].removeChild(tb.rows[i + 1].cells[0]);
    tb.rows[startRow].cells[col].rowSpan = (tb.rows[startRow].cells[col].rowSpan | 0) + 1;
    if (i == endRow - 1 && startRow != endRow) {
    mc(tableId, startRow, endRow, col + 1);
    }
    } else {
    mc(tableId, startRow, i + 0, col + 1);
    startRow = i + 1;
    }
    }
}
{#Window.onload = mc('tab',1,0,0)#}

function mergeCell(tableId, cols) {
    var table = document.getElementById(tableId);
    var table_rows = table.rows;
    // 需要合并的列的数组
    cols.forEach((v, k) => {
      // 循环table每一行
      for (let i = 0; i < table_rows.length - 1; i++) {
        // row
        let now_row = table_rows[i];
        let next_row = table_rows[i + 1];

        // col
        let now_col = now_row.cells[v];
        let next_col = next_row.cells[v];

        if (now_col.innerHTML == next_col.innerHTML) {
          // 标记为需要删除
          $(next_col).addClass('remove');
          // 递归判断当前对象时候已经被删除
          setParentSpan(table, i, v);
        }
      }
    });
    $(".remove").remove();
  }

  // (递归方法，用于多行统计) pram => table表格 当前行 对应的列
function setParentSpan(table, row, col) {
    var col_item = table.rows[row].cells[col];
    if ($(col_item).hasClass('remove')) {
      setParentSpan(table, --row, col)
    } else {
      col_item.rowSpan += 1;
    }
  }

Window.onload = mergeCell('tab', [0,1,2,3,4]);
</script>
</html>